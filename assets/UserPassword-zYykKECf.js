import{_ as b}from"./PageContainer-3tjeRPYM.js";import{q as n,s as E,o as V,a as y,w as o,x as t,y as i,b_ as x,E as k,C as U}from"./index-gBctTydG.js";import{E as F,a as q}from"./el-form-item-I0WkVVFf.js";import{E as C}from"./_plugin-vue_export-helper-XtHosviB.js";import{E as h}from"./el-input-fXeNWYkb.js";import"./_baseClone-jxGyQpDl.js";const d="password",$={__name:"UserPassword",setup(B){const u=n(),p=E(),r=n({old_pwd:"",new_pwd:"",re_pwd:""}),w=n({old_pwd:[{required:!0,message:"请输入原密码",trigger:"blur"},{min:6,max:15,message:"密码长度需在6-15位之间",trigger:"blur"}],new_pwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:15,message:"密码长度需在6-15位之间",trigger:"blur"},{validator:(m,e,l)=>{e===r.value.old_pwd?l(new Error("新密码不能与原密码相同")):l()},trigger:"blur"}],re_pwd:[{required:!0,message:"请确认新密码",trigger:"blur"},{min:6,max:15,message:"密码长度需在6-15位之间",trigger:"blur"},{validator:(m,e,l)=>{e!==r.value.new_pwd?l(new Error("确认密码与新密码不一致")):l()},trigger:"blur"}]}),f=async()=>{await u.value.validate(),await x(r.value),k.success("修改成功"),p.setToken(""),p.setUser({}),U.push("/login")},c=()=>{u.value.resetFields()};return(m,e)=>{const l=h,s=F,_=C,g=q,v=b;return V(),y(v,{title:"重置密码"},{default:o(()=>[t(g,{model:r.value,ref_key:"formRef",ref:u,rules:w.value,"label-width":"80px",style:{width:"50%"}},{default:o(()=>[t(s,{label:"原密码",prop:"old_pwd"},{default:o(()=>[t(l,{modelValue:r.value.old_pwd,"onUpdate:modelValue":e[0]||(e[0]=a=>r.value.old_pwd=a),type:d},null,8,["modelValue"])]),_:1}),t(s,{label:"新密码",prop:"new_pwd"},{default:o(()=>[t(l,{modelValue:r.value.new_pwd,"onUpdate:modelValue":e[1]||(e[1]=a=>r.value.new_pwd=a),type:d},null,8,["modelValue"])]),_:1}),t(s,{label:"确认密码",prop:"re_pwd"},{default:o(()=>[t(l,{modelValue:r.value.re_pwd,"onUpdate:modelValue":e[2]||(e[2]=a=>r.value.re_pwd=a),type:d},null,8,["modelValue"])]),_:1}),t(s,null,{default:o(()=>[t(_,{type:"primary",onClick:e[3]||(e[3]=a=>f())},{default:o(()=>[i("修改密码")]),_:1}),t(_,{onClick:c},{default:o(()=>[i("重置")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})}}};export{$ as default};
