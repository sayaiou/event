import{b as R,d as E,u as U,c as g,p as z,o as w,a as x,w as a,r as J,n as L,e as d,f as B,g as P,_ as q,h as K,i as y,m as b,j as G,k as j,l as H,q as $,s as Q,t as W,v as X,x as e,y as c,z as h,A as Y,E as M,B as Z,C as ee,D as O,F as N,G as se,H as te}from"./index-gBctTydG.js";import{E as ae}from"./el-checkbox-MtijR1AG.js";import{E as le,a as oe}from"./el-form-item-I0WkVVFf.js";import{E as re}from"./el-link-HP2txDP2.js";import{_ as ue,E as ne}from"./_plugin-vue_export-helper-XtHosviB.js";import{E as pe}from"./el-input-fXeNWYkb.js";/* empty css                   */import"./isEqual-wnGeoEc4.js";import"./_baseClone-jxGyQpDl.js";const F=Symbol("rowContextKey"),ie=["start","center","end","space-around","space-between","space-evenly"],de=["top","middle","bottom"],me=R({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:ie,default:"start"},align:{type:String,values:de}}),fe=E({name:"ElRow"}),ce=E({...fe,props:me,setup(m){const o=m,u=U("row"),n=g(()=>o.gutter);z(F,{gutter:n});const _=g(()=>{const s={};return o.gutter&&(s.marginRight=s.marginLeft=`-${o.gutter/2}px`),s}),l=g(()=>[u.b(),u.is(`justify-${o.justify}`,o.justify!=="start"),u.is(`align-${o.align}`,!!o.align)]);return(s,S)=>(w(),x(P(s.tag),{class:L(d(l)),style:B(d(_))},{default:a(()=>[J(s.$slots,"default")]),_:3},8,["class","style"]))}});var ge=q(ce,[["__file","row.vue"]]);const _e=K(ge),ve=R({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:y([Number,Object]),default:()=>b({})},sm:{type:y([Number,Object]),default:()=>b({})},md:{type:y([Number,Object]),default:()=>b({})},lg:{type:y([Number,Object]),default:()=>b({})},xl:{type:y([Number,Object]),default:()=>b({})}}),ye=E({name:"ElCol"}),be=E({...ye,props:ve,setup(m){const o=m,{gutter:u}=G(F,{gutter:g(()=>0)}),n=U("col"),_=g(()=>{const s={};return u.value&&(s.paddingLeft=s.paddingRight=`${u.value/2}px`),s}),l=g(()=>{const s=[];return["span","offset","pull","push"].forEach(r=>{const t=o[r];j(t)&&(r==="span"?s.push(n.b(`${o[r]}`)):t>0&&s.push(n.b(`${r}-${o[r]}`)))}),["xs","sm","md","lg","xl"].forEach(r=>{j(o[r])?s.push(n.b(`${r}-${o[r]}`)):H(o[r])&&Object.entries(o[r]).forEach(([t,f])=>{s.push(t!=="span"?n.b(`${r}-${t}-${f}`):n.b(`${r}-${f}`))})}),u.value&&s.push(n.is("guttered")),[n.b(),s]});return(s,S)=>(w(),x(P(s.tag),{class:L(d(l)),style:B(d(_))},{default:a(()=>[J(s.$slots,"default")]),_:3},8,["class","style"]))}});var we=q(be,[["__file","col.vue"]]);const xe=K(we),T=m=>(se("data-v-037bfab5"),m=m(),te(),m),Se=T(()=>h("h1",null,"注册",-1)),$e=T(()=>h("h1",null,"登录",-1)),Ee={class:"flex"},Ve={__name:"LoginPage",setup(m){const o=$(),u=$(!1),n=$(!1),_=Q(),l=$({username:"",password:"",repassword:""}),s={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:10,message:"用户名必须是3-10位的字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码必须是6-15位的字符",trigger:"blur"}],repassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:(r,t,f)=>{t!==l.value.password?f(new Error("两次输入的密码不一致")):f()},trigger:"blur"}]};W(u,()=>{l.value={username:"",password:"",repassword:""}}),X(()=>{JSON.parse(localStorage.getItem("loginMess"))&&(n.value=JSON.parse(localStorage.getItem("rememberMess")),l.value=JSON.parse(localStorage.getItem("loginMess")))});const S=async()=>{await o.value.validate(),await Y(l.value),M.success("注册成功"),u.value=!u.value},k=async()=>{await o.value.validate();const r=await Z(l.value);M.success("登录成功"),_.setToken(r.data.token),n.value?(localStorage.setItem("rememberMess",JSON.stringify(n.value)),localStorage.setItem("loginMess",JSON.stringify(l.value))):(localStorage.removeItem("rememberMess"),localStorage.removeItem("loginMess")),ee.push("/")};return(r,t)=>{const f=xe,i=le,v=pe,C=ne,V=re,I=oe,A=ae,D=_e;return w(),x(D,{class:"login-page"},{default:a(()=>[e(f,{span:12,class:"bg"}),e(f,{span:6,offset:3,class:"form"},{default:a(()=>[u.value?(w(),x(I,{key:0,model:l.value,rules:s,ref_key:"form",ref:o,size:"large",autocomplete:"off"},{default:a(()=>[e(i,null,{default:a(()=>[Se]),_:1}),e(i,{prop:"username"},{default:a(()=>[e(v,{"prefix-icon":d(O),placeholder:"请输入用户名",modelValue:l.value.username,"onUpdate:modelValue":t[0]||(t[0]=p=>l.value.username=p),modelModifiers:{trim:!0}},null,8,["prefix-icon","modelValue"])]),_:1}),e(i,{prop:"password"},{default:a(()=>[e(v,{"prefix-icon":d(N),type:"password",placeholder:"请输入密码",modelValue:l.value.password,"onUpdate:modelValue":t[1]||(t[1]=p=>l.value.password=p),modelModifiers:{trim:!0}},null,8,["prefix-icon","modelValue"])]),_:1}),e(i,{prop:"repassword"},{default:a(()=>[e(v,{"prefix-icon":d(N),type:"password",placeholder:"请输入再次密码",modelValue:l.value.repassword,"onUpdate:modelValue":t[2]||(t[2]=p=>l.value.repassword=p),modelModifiers:{trim:!0}},null,8,["prefix-icon","modelValue"])]),_:1}),e(i,null,{default:a(()=>[e(C,{class:"button",type:"primary",onClick:S,"auto-insert-space":""},{default:a(()=>[c(" 注册 ")]),_:1})]),_:1}),e(i,{class:"flex"},{default:a(()=>[e(V,{type:"info",underline:!1,onClick:t[3]||(t[3]=p=>u.value=!u.value)},{default:a(()=>[c(" ← 返回 ")]),_:1})]),_:1})]),_:1},8,["model"])):(w(),x(I,{key:1,model:l.value,rules:s,ref_key:"form",ref:o,size:"large",autocomplete:"off"},{default:a(()=>[e(i,null,{default:a(()=>[$e]),_:1}),e(i,{prop:"username"},{default:a(()=>[e(v,{modelValue:l.value.username,"onUpdate:modelValue":t[4]||(t[4]=p=>l.value.username=p),"prefix-icon":d(O),placeholder:"请输入用户名"},null,8,["modelValue","prefix-icon"])]),_:1}),e(i,{prop:"password"},{default:a(()=>[e(v,{modelValue:l.value.password,"onUpdate:modelValue":t[5]||(t[5]=p=>l.value.password=p),name:"password","prefix-icon":d(N),type:"password",placeholder:"请输入密码"},null,8,["modelValue","prefix-icon"])]),_:1}),e(i,{class:"flex"},{default:a(()=>[h("div",Ee,[e(A,{modelValue:n.value,"onUpdate:modelValue":t[6]||(t[6]=p=>n.value=p)},{default:a(()=>[c("记住我")]),_:1},8,["modelValue"]),e(V,{type:"primary",underline:!1},{default:a(()=>[c("忘记密码？")]),_:1})])]),_:1}),e(i,null,{default:a(()=>[e(C,{class:"button",type:"primary","auto-insert-space":"",onClick:k},{default:a(()=>[c("登录")]),_:1})]),_:1}),e(i,{class:"flex"},{default:a(()=>[e(V,{type:"info",underline:!1,onClick:t[7]||(t[7]=p=>u.value=!u.value)},{default:a(()=>[c(" 注册 → ")]),_:1})]),_:1})]),_:1},8,["model"]))]),_:1})]),_:1})}}},Ue=ue(Ve,[["__scopeId","data-v-037bfab5"]]);export{Ue as default};
